(function(){function t(){for(var i=0,t={},n,u=window.location.search.substring(1),r=u.split("&"),i=0;i<r.length;i++)n=r[i].split("="),typeof t[n[0]]=="undefined"?t[n[0]]=n[1]:typeof t[n[0]]=="string"?t[n[0]]=[t[n[0]],n[1]]:t[n[0]].push(n[1]);return t}var n=function(){var n=window.location.href.split("?")[0];return function(t){typeof t=="string"?window.history.replaceState(null,"",n+t):window.history.replaceState(null,"",n)}}();$(document).ready(function(){function p(){for(var t=0,n=0;n<r.length;n++)s.push(t),t+=r.eq(n).find(".item").length;s.push(t)}function w(n){if(!n)return e;var t=y.filter('[data-encode="'+n+'"]');return t.length===0?e:t}function c(n){n&&(n.addClass("focus"),u&&!u.is(n)&&u.removeClass("focus"),u=n)}function l(t,u){for(var s={},v,e,l,a,y,f=0;f<i.length;f++)for(v=i[f],e=0;e<v.length;e++)if(t===""||t===undefined)s[f]||(s[f]={}),s[f][e]=!0;else for(y=v.eq(e).data("tags").split(","),l=0;l<y.length;l++)if(y[l]===t){s[f]||(s[f]={});s[f][e]=!0;break}for(f=0;f<i.length;f++)for(s[f]&&r.eq(f).removeClass("d-none"),s[f]||r.eq(f).addClass("d-none"),e=0;e<i[f].length;e++)s[f]&&s[f][e]?i[f].eq(e).removeClass("d-none"):i[f].eq(e).addClass("d-none");h||(o.removeClass("d-none"),h=!0);u?(c(u),a=u.attr("data-encode"),a===""||typeof a!="string"?n():n("?tag="+a)):c(w(t))}var f=$(".js-tags"),y=f.find(".tag-button"),e=f.find(".tag-button--all"),o=$(".js-result"),r=o.find("section"),i=[],u=null,s=[],h=!1,a,v;r.each(function(){i.push($(this).find(".item"))});a=t();v=a.tag;p();l(v);f.on("click","a",function(){l($(this).data("encode"),$(this))})})})();
